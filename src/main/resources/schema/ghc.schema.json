{
    "$id": "engineInputGHCSchema",
    "$schema": "https://json-schema.org/draft/2019-09/schema",
    "title": "EngineInputGHCSchema",
    "description": "Schema document to keep the information of the timetable to be generated by PenalaraGHC.",
    "required": [
        "versionJson",
        "date",
        "ghcData"
    ],
    "properties": {
        "versionJson": {
            "title": "SchemaVersion",
            "description":"Version of EngineInputGHCSchema used",
            "type":"string"
        },
        "date": {
            "title": "JsonGenerationDate",
            "description": "Json's generation date.",
            "type": "string",
            "format": "date-time"
        },
        "ghcData": {
            "title": "GhcData",
            "description": "Schema of the object that contains the timetable planning data.",
            "type": "object",
            "required": [
                "periods",
                "frames",
                "buildings",
                "classRooms",
                "teachers",
                "subjects",
                "groups",
                "sessions"
            ],
            "properties": {
                "periods": {
                    "title": "Periods",
                    "description": "Weeks or periods with different assignments which contains the timetable.",
                    "type": "object",
                    "required": [
                        "periodsList"
                    ],
                    "properties": {
                        "followedPeriods":{
                            "title": "FollowedPeriods",
                            "description": "Indicates whether, the periods or weeks, considered consecutive days the last day of the previous one, with the first of the next.",
                            "type": "boolean",
                            "default": false
                        },
                        "periodsList": {
                            "title": "PeriodsList",
                            "description": "List of periods.",
                            "type": "array",
                            "additionalItems": false,
                            "items": {
                                "title": "Period",
                                "type": "object",
                                "required": [
                                    "id",
                                    "lastDay"
                                ],
                                "properties": {
                                    "id": {
                                        "description": "Identifier name of the period.",
                                        "type": "string"
                                    },
                                    "lastDay": {
                                        "description": "End day of the period, the period include it.",
                                        "type": "integer"
                                    }
                                }
                            }
                        }
                    }
                },
                "frames": {
                    "title": "Frames",
                    "description": "Tables of Timetable which it contains sections where subject sessions are located.",
                    "type": "array",
                    "additionalItems": false,
                    "items": {
                        "title": "Frame",
                        "type": "object",
                        "required": [
                            "id",
                            "sections"
                        ],
                        "properties": {
                            "id": {
                                "description": "Identifier name of the frame.",
                                "type": "string"
                            },
                            "sections": {
                                "title": "Sections",
                                "description": "Timetable cells where sesions are localted.",
                                "type": "array",
                                "additionalItems": false,
                                "items": {
                                    "required": [
                                        "day",
                                        "index",
                                        "entryTime",
                                        "exitTime",
                                        "tipo"
                                    ],
                                    "title": "Section",
                                    "type": "object",
                                    "properties": {
                                        "day": {
                                            "description": "Day of the week when is located the section.",
                                            "type": "integer"
                                        },
                                        "index": {
                                            "description": "Index inside the day where is located the section.",
                                            "type": "integer"
                                        },
                                        "entryTime": {
                                            "description": "Start time of the section.",
                                            "type": "string",
                                            "format": "time"
                                        },
                                        "exitTime": {
                                            "description": "End time of the section.",
                                            "type": "string",
                                            "format": "time"
                                        },
                                        "tipo": {                                            
                                            "description": "Kind of section.",
                                            "enum": ["lectivo", "recreo", "mediodia"]
                                        },
                                        "allowed": {
                                            "description": "Indicates if the section is available to assign.",
                                            "type": "boolean",
                                            "default": true
                                        }
                                    }
                                }
                            }
                        }
                    }
                },
                "buildings": {
                    "title": "Buildings",
                    "description": "Contains the buildings of the school or education centre.",
                    "type": "array",
                    "additionalItems": false,
                    "items": {
                        "required": [
                            "id"
                        ],
                        "title": "Building",
                        "type": "object",
                        "properties": {
                            "id": {
                                "description": "Identifier name of the building.",
                                "type": "string"
                            },                            
                            "distances": {
                                "title": "Distances",
                                "description": "Distances in minutes to another building of the school.",
                                "type": "array",
                                "additionalItems": false,
                                "items": {
                                    "title": "Distance",
                                    "type": "object",
                                    "required": [
                                        "refBuilding",
                                        "minutes"
                                    ],
                                    "properties": {
                                        "refBuilding": {
                                            "description": "Abbreviated name of the other building that refer the distance.",
                                            "type": "string"
                                        },
                                        "minutes": {
                                            "description": "Distance minutes from the building from the referred building.",
                                            "type": "integer"
                                        }
                                    }
                                }
                            }
                        }
                    }
                },
                "classRooms": {
                    "title": "ClassRoms",
                    "description": "Contains the rooms to put on the sessions.",
                    "type": "array",
                    "additionalItems": false,
                    "items": {
                        "title": "Classrom",
                        "type": "object",
                        "required": [
                            "id"
                        ],                        
                        "properties": {
                            "id": {
                                "description": "Identifier name of the classroom.",
                                "type": "string"
                            },
                            "capacity": {
                                "description": "Maximum students number who the classroom can accommodate.",
                                "type": "integer"
                            },
                            "frameTemplate": {
                                "title": "ClassRoomTemplate",
                                "description": "Classroom template with assignment preferences to section of the frames.",
                                "type": "array",
                                "additionalItems": false,
                                "items": {                                    
                                    "title": "ClassRoomSectionPreference",
                                    "type": "object",
                                    "required": [
                                        "day",
                                        "index",
                                        "frame",
                                        "type"
                                    ],                                    
                                    "properties": {
                                        "day": {
                                            "description": "Day of the week when is located the section.",
                                            "type": "integer"
                                        },
                                        "index": {
                                            "description": "Index inside the day where is located the section.",
                                            "type": "integer"
                                        },
                                        "frame": {
                                            "description": "Identifier name of the frame.",
                                            "type": "string"
                                        },
                                        "type": { 
                                            "description": "Element availability to be assigned to the section.",
                                            "enum": ["banned", "available"] 
                                        }
                                    }
                                }
                            },
                            "refBuilding": {
                                "description": "Abbreviated name building where is located the classroom.",
                                "type": "string"
                            },
                            "fullDay": {
                                "description": "Indicates if the classroom must be reserved all day after it have one assignment.",
                                "type": "boolean",
                                "default": false
                            }
                        }
                    }
                },
                "classRoomsSets":{
                    "title":"ClassRoomsSets",
                    "description":"A divisions of classrooms, group by characteristics or organizational needs.",
                    "type":"array",
                    "additionalItems": false,
                    "items": {
                        "title":"ClassRoomSet",
                        "type":"object",
                        "required":[
                            "id",
                            "rooms"
                        ],
                        "properties":{
                            "id": {
                                "description": "Identifier name of the ClassRooms group.",
                                "type": "string"
                            },
                            "rooms":{
                                "title":"ClassRoomEntries",
                                "description":"ClassRooms which it contains the group",
                                "type":"array",
                                "additionalItems": false,
                                "items": {                                    
                                    "title":"ClassRoomRef",
                                    "description":"Identifier name of the classroom.",
                                    "type":"string"
                                }                                
                            },
                            "anonymousRooms":{
                                "description": "Number of classrooms non-specific defined that it contains the group.",
                                "type": "integer"
                            }
                        }
                    }
                },
                "tasks":{
                    "title": "Tasks",
                    "description": "Types of tasks or activities for the teachers.",
                    "type": "object",
                    "required":[
                        "taskList",
                        "byDefault"
                    ],
                    "properties":{
                        "taskList": {
                            "title": "TaskList",
                            "description": "List of the task types for the teachers.",
                            "type": "array",
                            "additionalItems": false,
                            "items": {
                                "title": "Task",
                                "description": "Teacher's activity type.",
                                "type": "object",
                                "required":[
                                    "id"
                                ],
                                "properties":{
                                    "id": {
                                        "description": "Task's identifier name.",
                                        "type": "string"
                                    },
                                    "frameTemplate":{
                                        "$ref": "#/definitions/frameTemplate"
                                    }
                                }
                            }
                        },
                        "byDefault": {
                            "title": "ByDefault",
                            "description": "Default type of task for all types of sessions.",
                            "type": "object",
                            "required":[
                                "teachingDefault",
                                "meetingsDefault",
                                "complementaryDefault",
                                "onCallHoursDefault"
                            ],
                            "properties":{
                                "teachingDefault": {
                                    "description": " Default task for teaching sessions.",
                                    "type": "string"
                                },
                                "meetingsDefault": {
                                    "description": "Default task for meeting sessions.",
                                    "type": "string"
                                },
                                "complementaryDefault": {
                                    "description": "Default task for complementary sessions.",
                                    "type": "string"
                                },
                                "onCallHoursDefault": {
                                    "description": "Default task for on call sessions.",
                                    "type": "string"
                                }
                            }                            
                        }
                    }
                },
                "teachers":{
                    "title": "Teachers",
                    "description": "Teacher object with personal data, preferences template and settings.",
                    "type": "array",
                    "additionalItems": false,
                    "items": {
                        "title":"Teacher",
                        "type":"object",
                        "required":[
                            "id"
                        ],
                        "properties":{
                            "id": {
                                "id": "Identifier of the teacher.",
                                "type": "string"
                            },
                            "associationIdentifier": {
                                "description": "Group or association of teachers that should have similar of entry and out hours, if it is possible. It's useful for teachers that share transport.",
                                "type": "string"
                            },
                            "frameTemplate":{
                                "$ref": "#/definitions/frameTemplate"
                            },
                            "settings": {
                                "title": "Settings",
                                "description": "Teacher's strict and ponderable conditions for the timetable. These can (or not) be different for eacch week/period.",
                                "type": "array",
                                "additionalItems": false,
                                "items": {
                                    "title": "PeriodSetting",
                                    "type": "object",
                                    "required": [
                                        "context"
                                    ],                                    
                                    "properties": {
                                        "context": {
                                            "description": "Defines the period in the timetable when the settings take effect. By default it is 'whole', which indicates that it affects the entire timetable, that is, all its periods.",
                                            "type": "string",
                                            "default": "whole"
                                        },
                                        "weeklyStay": {
                                            "title": "WeeklyStay",
                                            "description": "Indicates the maximum teacher´s permanence time,  preferred  and strict , for the weekly stay that the teacher can be in the school.",
                                            "type": "object",                                                                      
                                            "properties": {
                                                "strict": {
                                                    "description": "Strict time in minutes of maximum weekly stay.",
                                                    "type": "integer"
                                                },
                                                "preferred": {
                                                    "description": "Ponderable Time in minutes of maximum weeekly stay.",
                                                    "type": "integer"
                                                },
                                                "countAroundMidday": {
                                                    "description": "Indicates, in case of a split day, that the unoccupied intervals between the morning and afternoon class units are counted each day.",
                                                    "type": "boolean"
                                                }
                                            }
                                        },                                        
                                        "daylyStay": {
                                            "title": "DaylyStay",
                                            "description": "Indicates the maximum teacher´s permanence time,  preferred  and strict , for the daily stay that the teacher can be in the school.",
                                            "type": "object",                                                                          
                                            "properties": {
                                                "strict": {
                                                    "description": "Strict time in minutes of maximum daily stay.",
                                                    "type": "integer"
                                                },
                                                "preferred": {
                                                    "description": "Ponderable Time in minutes of maximum daily stay.",
                                                    "type": "integer"
                                                },
                                                "countAroundMidday": {
                                                    "description": "Indicates, in case of a split day, that the unoccupied intervals between the morning and afternoon class units are counted.",
                                                    "type": "boolean"
                                                }
                                            }
                                        },
                                        "avoidGapsBetweenSesions": {
                                            "description": "Indicates if it should avoid free gaps between sessions for the teacher. It is a ponderable condition.",
                                            "type": "boolean",
                                            "default": false
                                        },
                                        "maxContinuousTeaching": {
                                            "title": "MaxContinuousTeaching",
                                            "description": "Indicates the continuous maximum time teaching sessions, that are allowed without have a free gap or a non teaching session in between.",
                                            "type": "object",
                                            "required":[
                                                "minutes"
                                            ],                                                                          
                                            "properties": {
                                                "strict": {
                                                    "description": "Indicate if it is a strict condition.",
                                                    "type": "boolean",
                                                    "default": false
                                                },
                                                "minutes": {
                                                    "description": "Maximum continuous teaching time in minutes.",
                                                    "type": "integer"
                                                },
                                                "minBreak": {
                                                    "description": "Minimum time gap to considered it as a break.",
                                                    "type": "integer",
                                                    "default": 30
                                                }
                                            }
                                        },
                                        "avoidClassesAroundBreak": {
                                            "description": "Indicate if will penalize the existence of sessions on both sides of a recess guard taught by this teacher.",
                                            "type": "boolean",
                                            "default": false
                                        },
                                        "freeTimes":  {
                                            "title": "FreeTimes",
                                            "description": "Contains the free spaces of time that the teacher should have.",
                                            "type": "object",                                                                      
                                            "properties": {
                                                "fullDay": {
                                                    "title": "FullDaysFreeTimes",
                                                    "description": "Teacher's full days of free time.",
                                                    "type": "object",                                                                      
                                                    "properties": {
                                                        "strictDays": {
                                                            "description": "Number of strict days when teacher should be free.",
                                                            "type": "integer",
                                                            "default":0
                                                        },
                                                        "preferredDays": {
                                                            "description": "Number of preferred days when teacher should be free.",
                                                            "type": "integer",
                                                            "default":0
                                                        }
                                                    }
                                                },
                                                "firstMinutes": {
                                                    "title": "FirstMinutesFreeTimes",
                                                    "description": "Teacher's free intervals at the beginning of the day.",
                                                    "type": "object",
                                                    "required": [
                                                        "minutes"
                                                    ],                                                                         
                                                    "properties": {
                                                        "strictDays": {
                                                            "description": "Number of strict days when teacher should have the free interval at the beginning of the day.",
                                                            "type": "integer",
                                                            "default":0
                                                        },
                                                        "preferredDays": {
                                                            "description": "Number of preferred days when teacher should have the free interval at the beginning of the day.",
                                                            "type": "integer",
                                                            "default":0
                                                        },
                                                        "minutes": {
                                                            "description": "Minutes of free time at the beginning of the day.",
                                                            "type": "integer"
                                                        }
                                                    }
                                                },
                                                "lastMinutes": {
                                                    "title": "LastMinutesFreeTimes",
                                                    "description": "Teacher's free intervals at the end of the day.",
                                                    "type": "object",
                                                    "required": [
                                                        "minutes"
                                                    ],                                                                        
                                                    "properties": {
                                                        "strictDays": {
                                                            "description": "Number of strict days when teacher should have the free interval at the end of the day.",
                                                            "type": "integer",
                                                            "default":0
                                                        },
                                                        "preferredDays": {
                                                            "description": "Number of preferred days when teacher should have the free interval at the end of the day.",
                                                            "type": "integer",
                                                            "default":0
                                                        },
                                                        "minutes": {
                                                            "description": "Minutes of free time at the end of the day.",
                                                            "type": "integer"
                                                        }
                                                    }
                                                },
                                                "consecutiveAnyTime": {
                                                    "title": "ConsecutiveAnyTimeFreeTimes",
                                                    "description": "Teacher's free intervals at any time of the day.",
                                                    "type": "object",
                                                    "required": [
                                                        "minutes"
                                                    ],                                                                        
                                                    "properties": {
                                                        "strictDays": {
                                                            "description": "Number of strict days when teacher should have the free interval.",
                                                            "type": "integer",
                                                            "default":0
                                                        },
                                                        "preferredDays": {
                                                            "description": "Number of preferred days when teacher should have the free interval.",
                                                            "type": "integer",
                                                            "default":0
                                                        },
                                                        "minutes": {
                                                            "description": "Minutes of free time interval.",
                                                            "type": "integer"
                                                        }
                                                    }
                                                }
                                            }                                            
                                        },
                                        "freePartTimes": {
                                            "title": "FreePartTime",
                                            "description": "Half day off periods.",
                                            "type": "object",                                                                      
                                            "properties": {
                                                "mornings": {
                                                    "title": "MorningsFreePartTimes",
                                                    "description": "Mornings off periods.",
                                                    "type": "object",
                                                    "properties": {
                                                        "strict": {
                                                            "description": "Strict number of mornings off periods.",
                                                            "type": "integer",
                                                            "default": 0
                                                        },
                                                        "preferred": {
                                                            "description": "Preferred number of mornings off periods.",
                                                            "type": "integer",
                                                            "default": 0
                                                        }
                                                    }                                                    
                                                },
                                                "afternoons": {
                                                    "title": "AfternoonFreePartTimes",
                                                    "description": "Afternoons off periods.",
                                                    "type": "object",
                                                    "properties": {
                                                        "strict": {
                                                            "description": "Strict number of afternoons off periods.",
                                                            "type": "integer",
                                                            "default": 0
                                                        },
                                                        "preferred": {
                                                            "description": "Preferred number of afternoons off periods.",
                                                            "type": "integer",
                                                            "default": 0
                                                        }
                                                    }       
                                                },
                                                "indistinctly":{
                                                    "title": "IndistinctlyFreePartTimes",
                                                    "description": "Indistinctly, mornings or afternoons, off periods.",
                                                    "type": "object",
                                                    "properties": {
                                                        "strict": {
                                                            "description": "Strict number of mornings or afternoons off periods.",
                                                            "type": "integer",
                                                            "default": 0
                                                        },
                                                        "preferred": {
                                                            "description": "Preferred number of mornings or afternoons off periods.",
                                                            "type": "integer",
                                                            "default": 0
                                                        }
                                                    }       
                                                }
                                            }                                           
                                        },
                                        "incompatibilities": {
                                            "title": "Incompatibilities",
                                            "description": "Contains teacher's incompatibilities about sessions assignation and rests times.",
                                            "type": "object",
                                            "properties": {
                                                "freeTimeBetweenDayBeforeAndCurrent": {
                                                    "title": "FreeTimeBetweenDays",
                                                    "description": "Minutes between the departure and the next day's entry.",
                                                    "type": "object",
                                                    "required": [
                                                        "minutes"
                                                    ],  
                                                    "properties": {
                                                        "strict": {
                                                            "description": "Indicate if the incompatibility is a strict condition.",
                                                            "type": "boolean",
                                                            "default": false
                                                        },
                                                        "minutes": {
                                                            "description": "Custom time in minutes for incompatibility.",
                                                            "type": "integer"
                                                        }
                                                    }
                                                },
                                                "freeTimeBetweenEndWeekAndStartWeekDays": {
                                                    "title": "FreeTimeBetweenWeeksBorders",
                                                    "description": "Minutes between finishing time on week's last day, and starting time the next week.",
                                                    "type": "object",
                                                    "required": [
                                                        "minutes"
                                                    ],  
                                                    "properties": {
                                                        "strict": {
                                                            "description": "Indicate if the incompatibility is a strict condition.",
                                                            "type": "boolean",
                                                            "default": false
                                                        },
                                                        "minutes": {
                                                            "description": "Custom time in minutes for incompatibility.",
                                                            "type": "integer"
                                                        }
                                                    }
                                                },
                                                "freeTimeFirstOrLastHoursDay": {
                                                    "title": "FreeTimeFirstOrLastHoursDay",
                                                    "description": "Minutes of free time at first or last hours of the day.",
                                                    "type": "object",
                                                    "required": [
                                                        "minutes"
                                                    ],  
                                                    "properties": {
                                                        "strict": {
                                                            "description": "Indicate if the incompatibility is a strict condition.",
                                                            "type": "boolean",
                                                            "default": false
                                                        },
                                                        "minutes": {
                                                            "description": "Custom time in minutes for incompatibility.",
                                                            "type": "integer"
                                                        }
                                                    }
                                                },
                                                "doNotFinishAtLastAfternoonSectionIfStartedAtFirstAfternoonSection": {
                                                    "title": "DoNotFinishAtLastAfternoonSection",
                                                    "description": "Do not finish at last hour in the afternoon and start at the first one.",
                                                    "type": "object",
                                                    "properties": {
                                                        "strict": {
                                                            "description": "Indicate if the incompatibility is a strict condition.",
                                                            "type": "boolean",
                                                            "default": false
                                                        }
                                                    }
                                                },
                                                "doNotFinishAtLastMorningSectionIfStartedAtFirstMorningSection": {
                                                    "title": "DoNotFinishAtLastMorningSection",
                                                    "description": "Do not start at first hour and and finish at the last hour of the morning.",
                                                    "type": "object",
                                                    "properties": {
                                                        "strict": {
                                                            "description": "Indicate if the incompatibility is a strict condition.",
                                                            "type": "boolean",
                                                            "default": false
                                                        }
                                                    }
                                                },
                                                "doNotFinishAtLastMorningSectionIfStartAtFirstAfternoonSection": {
                                                    "title": "DoNotFinishAtLastMorningSectionIfStartAtFirstAfternoon",
                                                    "description": "Do not finish at the last hour in the morning and start at the first one in the afternoon.",
                                                    "type": "object",
                                                    "properties": {
                                                        "strict": {
                                                            "description": "Indicate if the incompatibility is a strict condition.",
                                                            "type": "boolean",
                                                            "default": false
                                                        }
                                                    }
                                                },
                                                "doNotFinishAtLastMorningSectionIfHasAfternoonAssignment": {
                                                    "title": "DoNotFinishAtLastMorningSectionIfHasAfternoon",
                                                    "description": "Do not finish at the last hour in the morning and have the afternoon occupied.",
                                                    "type": "object",
                                                    "properties": {
                                                        "strict": {
                                                            "description": "Indicate if the incompatibility is a strict condition.",
                                                            "type": "boolean",
                                                            "default": false
                                                        }
                                                    }
                                                },
                                                "doNotStartAtFirstMorningSectionIfHasAfternoonAssignment": {
                                                    "title": "DoNotStartAtFirstMorningSection",
                                                    "description": "Do not start at the first hour and have occupation in the afternoon.",
                                                    "type": "object",
                                                    "properties": {
                                                        "strict": {
                                                            "description": "Indicate if the incompatibility is a strict condition.",
                                                            "type": "boolean",
                                                            "default": false
                                                        }
                                                    }
                                                },
                                                "freeTimeAroundMidday": {
                                                    "title": "FreeTimeAroundMidday",
                                                    "description": "Do not have less than a custom free time around noon pause.",
                                                    "type": "object",
                                                    "required": [
                                                        "minutes"
                                                    ],  
                                                    "properties": {
                                                        "strict": {
                                                            "description": "Indicate if the incompatibility is a strict condition.",
                                                            "type": "boolean",
                                                            "default": false
                                                        },
                                                        "minutes": {
                                                            "description": "Custom time in minutes for incompatibility.",
                                                            "type": "integer"
                                                        }
                                                    }
                                                }
                                            }
                                        },
                                        "daylyOcupation": {                                            
                                            "title": "DaylyOcupation",
                                            "description": "Maximum and minimum values for teaching or activity time for teachers. This object indicates the kind of condition (estrict or ponderable) and if it should be adjusted the automatic calcultation in minutes at engine.",
                                            "type": "object",                                                                    
                                            "properties": {
                                                "allowFreeDays": {
                                                    "description": "Indicates whether the check of the minimums is omitted in case of days without allocation. Prohibited days never are not checked.",
                                                    "type": "boolean",
                                                    "default": false
                                                },
                                                "minimumTeaching": {
                                                    "title": "MinimumTeaching",
                                                    "description": "Teacher's minimum time of teaching with students.",
                                                    "type": "object",
                                                    "required":[
                                                        "restriction"
                                                     ],                                                                          
                                                    "properties": {
                                                        "restriction": {
                                                            "description": "Kind of restriction. It can be 'strict', 'preferred' or according to the related rule of optimization.",
                                                            "enum": [
                                                                "strict",
                                                                "preferred",
                                                                "accordingToRule"
                                                            ] 
                                                        },
                                                        "setting": {
                                                            "description": "Indicates whether the automatic calculation of the value must be adjusted to higher or lower.",
                                                            "enum": [
                                                                "auto",
                                                                "oneMore",
                                                                "oneLess"
                                                            ],
                                                            "default": "auto"
                                                        }
                                                    }
                                                },
                                                "maximumTeaching": {
                                                    "title": "MaximumTeaching",
                                                    "description": "Teacher's maximum time of teaching with students.",
                                                    "type": "object",
                                                    "required":[
                                                       "restriction"
                                                    ],                                                                          
                                                    "properties": {
                                                        "restriction": {
                                                            "description": "Kind of restriction. It can be 'strict', 'preferred' or according to the related rule of optimization.",
                                                            "enum": [
                                                                "strict",
                                                                "preferred",
                                                                "accordingToRule"
                                                            ] 
                                                        },
                                                        "setting": {
                                                            "description": "Indicates whether the automatic calculation of the value must be adjusted to higher or lower.",
                                                            "enum": [
                                                                "auto",
                                                                "oneMore",
                                                                "oneLess"
                                                            ],
                                                            "default": "auto"
                                                        }
                                                    }
                                                },
                                                "minimumOccupancy": {
                                                    "title": "MinimumOccupancy",
                                                    "description": "Teacher's minimum time of teaching with students and other non-teaching activities indicated as computable.",
                                                    "type": "object",
                                                    "properties": {
                                                        "restriction": {
                                                            "description": "Kind of restriction. It can be 'strict', 'preferred' or according to the related rule of optimization.",
                                                            "enum": [
                                                                "strict",
                                                                "preferred",
                                                                "accordingToRule"
                                                            ] 
                                                        },
                                                        "setting": {
                                                            "description": "Indicates whether the automatic calculation of the value must be adjusted to higher or lower.",
                                                            "enum": [
                                                                "auto",
                                                                "oneMore",
                                                                "oneLess"
                                                            ],
                                                            "default": "auto"
                                                        }
                                                    }
                                                },
                                                "maximumOccupancy": {
                                                    "title": "MaximumOccupancy",
                                                    "description": "Teacher's maximum time of teaching with students and other non-teaching activities indicated as computable.",
                                                    "type": "object",
                                                    "properties": {
                                                        "restriction": {
                                                            "description": "Kind of restriction. It can be 'strict', 'preferred' or according to the related rule of optimization.",
                                                            "enum": [
                                                                "strict",
                                                                "preferred",
                                                                "accordingToRule"
                                                            ] 
                                                        },
                                                        "setting": {
                                                            "description": "Indicates whether the automatic calculation of the value must be adjusted to higher or lower.",
                                                            "enum": [
                                                                "auto",
                                                                "oneMore",
                                                                "oneLess"
                                                            ],
                                                            "default": "auto"
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                },
                "subjects": {
                    "title": "Subjects",
                    "description": "School subjects which are teach at sessions.",
                    "type": "array",
                    "additionalItems": false,
                    "items": {
                        "title":"Subject",
                        "type":"object",
                        "required":[
                            "id"
                        ],
                        "properties":{
                            "id": {
                                "description": "Identifier name of the subject.",
                                "type": "string"
                            },
                            "student-mentoring": {
                                "description": "Indicates if the subject is a tutorship",
                                "type": "boolean",
                                "default": false
                            },
                            "frameTemplate":{
                                "$ref": "#/definitions/frameTemplate"
                            }
                        }
                    }
                },
                "groups": {                    
                    "title": "Groups",
                    "description": "Sets of students.",
                    "type": "array",
                    "additionalItems": false,
                    "items": {
                        "title":"Group",
                        "type":"object",
                        "required":[
                            "id",
                            "refFrame"
                        ],
                        "properties":{
                            "id": {
                                "description": "Identifier name of the group.",
                                "type": "string"
                            },
                            "refFrame": {
                                "description": "Identifier name of the group's frame.",
                                "type": "string"
                            },                       
                            "freeAfternoons": {
                                "description": "Stric number of free afternoons for the group.",
                                "type": "integer"
                            },
                            "frameTemplate":{
                                "$ref": "#/definitions/frameTemplate"
                            },
                            "numStudents": {
                                "description": "Number of students in the group.",
                                "type": "integer"
                            },
                            "notGaps": {
                                "description": "Indicates If the group can have gaps in its timetable.",
                                "type": "boolean"
                            },
                            "gapsAlwaysInNonPreferred": {
                                "description": "Indicates If the engine, for free intervals or gaps, to be in positions marked as non-preferred in the template.",
                                "type": "boolean"
                            }
                        }
                    }
                },
                "sessions": {
                    "title": "Sessions",
                    "description": "Teachers sessions. These can be with students groups, meetings with other teachers or complementary activities.",
                    "type": "array",
                    "additionalItems": false,
                    "items": {
                        "title":"Session",
                        "type":"object",
                        "required":[
                            "id",
                            "refFrame",
                            "refTasks",
                            "refTeachers",
                            "distribution"
                        ],
                        "properties":{
                            "id": {
                                "description": "Identifier name of the session.",
                                "type": "string"
                            },
                            "refFrame": {
                                "description": "Identifier name of the session's frame.",
                                "type": "string"
                            },
                            "refTasks": {
                                "title": "RefTasks",
                                "description": "List of task in the session.",
                                "type": "array",
                                "minItems": 1,
                                "additionalItems": false,
                                "items": {
                                    "title": "RefTasks",
                                    "description": "Identifier name of the task.",
                                    "type": "string"
                                }
                            },
                            "refTeachers":{
                                "title": "RefTeachers",
                                "description": "List of teachers who teach or interact in the session.",
                                "type": "array",
                                "additionalItems": false,
                                "items": {
                                    "title": "RefTeacher",
                                    "description": "Identifier name of one teacher.",
                                    "type": "string"
                                }
                            },
                            "refSubjects": {
                                "title": "RefSubjects",
                                "description": "List of subject's identifier which is teach at the session. At least one is required for teaching sessions with students groups.",
                                "type": "array",
                                "additionalItems": false,
                                "items": {
                                    "title": "RefSubject",
                                    "description": "Identifier name of the subject.",
                                    "type": "string"
                                }
                            },
                            "refGroups": {
                                "title": "RefGroups",
                                "description": "List of group's identifier which is teach at the session. At least one is required for teaching sessions.",
                                "type": "array",
                                "additionalItems": false,
                                "items": {
                                    "title": "RefGroup",
                                    "description": "Pair of, reference id and number of students, values.",
                                    "type": "object",
                                    "required":[
                                        "refGroup"
                                    ],
                                    "properties":{
                                        "refGroup": {
                                            "description": "Identifier of the Group.",
                                            "type": "string"
                                        },
                                        "numStudents": {
                                            "description": "Custom number of students who are in the sessions. If is not specified, the engine takes by default the value of the Group object.",
                                            "type": "integer"
                                        }
                                    }
                                }
                            },
                            "distribution": { 
                                "title":"Distribution",
                                "description": "Contains information on how the classes of the session are distributed throughout the week. Only should contain one element between 'stablePeriods' and 'variablePeriods'.",
                                "type":"object",
                                "$comment": "Property 'periods' is required if there are more than one period in the timetable. Propeties 'stablePeriods' and 'variablePeriods' are mutually exclusive (Schema tag 'One Of' is not specified because POJO automatic generation incompatibility).",
                                "properties":{
                                    "periods": {
                                        "title": "RefPeriods",
                                        "description": "List of periods or weeks when the session must be assigned.",
                                        "type": "array",
                                        "additionalItems": false,
                                        "items": {
                                            "title": "RefPeriod",
                                            "description": "Identifier of the period.",
                                            "type": "string"
                                        }
                                    },
                                    "stablePeriods": {
                                        "title":"StablePeriods",
                                        "description": "The session's distribution is equals in each period.",
                                        "type":"object",
                                        "$comment": "Only one property can be applied (Schema tag 'One Of' is not specified because POJO automatic generation incompatibility).",
                                        "properties":{
                                            "weeklyStable": {
                                                "$ref": "#/definitions/weeklyStable"
                                            },   
                                            "weeklyVariable": {
                                                "$ref": "#/definitions/weeklyVariable"
                                            },
                                            "weeklyCustom": {
                                                "title": "WeeklyCustom",
                                                "description": "Contains an array of 'WeeklyStable' distributions.",
                                                "type": "array",
                                                "additionalItems": false,
                                                "items": {
                                                    "title": "CustomWeeklyStable",
                                                    "description": "Weekly distribution immovable.",
                                                    "type": "array",
                                                    "additionalItems": false,
                                                    "items": {
                                                        "title": "DailySections",
                                                        "description": "Indicates the number of sections wich sould have the session in the day.",
                                                        "type": "integer"   
                                                    }
                                                }
                                            }
                                        }
                                    },
                                    "variablePeriods": {
                                        "title":"VariablePeriods",
                                        "description": "The total of the classes of the distribution, are divided among the periods.",
                                        "type":"object",
                                        "$comment": "Propeties 'weeklyStable' and 'weeklyVariable' are mutually exclusive (Schema tag 'One Of' is not specified because POJO automatic generation incompatibility).",
                                        "properties":{
                                            "weeklyStable": {
                                                "$ref": "#/definitions/weeklyStable",
                                                "$comment": "It indicates a stable distribution (numbers of days and number of sections per asignation day), among all the periods between which it is distributed. It is not the distribution of each period, but the total of this session."
                                            },   
                                            "weeklyVariable": {
                                                "$ref": "#/definitions/weeklyVariable",
                                                "$comment": "It indicates a variable distribution, among all the periods between which it is distributed. It is not the distribution of each period, but the total of this session."
                                            },
                                            "maximunSectionsInPeriod": {
                                                "description": "Maximum number of sections to assign in each Period. If not defined, it is considered that there is no maximum limit.",
                                                "type":"integer"
                                            },
                                            "minimnunSectionsInPeriod": {
                                                "description": "Minimum number of sections to assign in each Period.",
                                                "type":"integer",
                                                "default": 0
                                            }
                                        }
                                    }
                                } 
                            },
                            "sessionClassRooms":{
                                "title": "SessionClassRooms",
                                "description": "Contains the information about classrooms for the sessions. At least one classroom  is required for teaching sessions.",
                                "type": "object",
                                "required":[
                                    "classRoomsToAssign"
                                ],
                                "properties":{
                                    "classRoomsToAssign": {
                                        "title": "ClassRoomsToAssign",
                                        "description": "List of classrooms to the session. Each object in the list represent one classroom that should be assigned.",
                                        "type": "array",
                                        "additionalItems": false,
                                        "items": {
                                            "title": "RefClassRoomToAssign",
                                            "description": "Object, with classrooms and/or set of classrooms, where the engine should take one of them for assign the session.",
                                            "type": "object",
                                            "properties":{
                                                "classRoomsList": {
                                                    "title":"ClassRoomRef",
                                                    "description":"Classroom's identifier name that could be assigned to session.",
                                                    "type":"array",
                                                    "additionalItems": false,
                                                    "items": {                                    
                                                        "title":"ClassRoomRef",
                                                        "description":"Identifier name of the classroom.",
                                                        "type":"string"
                                                    }                            
                                                },
                                                "classRoomsSetsList": {
                                                    "title":"ClassRoomsSetsList",
                                                    "description":"Identifier name of classroom set, where one classroom could be taken to assign to session.",
                                                    "type":"array",
                                                    "additionalItems": false,
                                                    "items": {                                    
                                                        "title":"ClassRoomSetRef",
                                                        "description":"Identifier name of the classroom.",
                                                        "type":"string"
                                                    }                   
                                                }
                                            }
                                        }
                                    },
                                    "capacityPreference": {
                                        "description": "Preference about if the engine should evaluate the classroom capacity to assign the session.",
                                        "enum": [
                                            "attempt",
                                            "strict",
                                            "ignore"
                                        ],
                                        "default": "ignore"
                                    },
                                    "capacityType": {
                                        "description": "Indicates if all students of the sessions should fit on in each classroom, or in the amount of all classrooms.",
                                        "enum": [
                                            "individual",
                                            "collective"
                                        ],
                                        "default": "individual"
                                    }
                                }
                            },
                            "frameTemplate":{
                                "$ref": "#/definitions/frameTemplate"
                            },
                            "sessionSettings": {
                                "title": "SessionSettings",
                                "description": "Conditions about the position of the session units.",
                                "type": "object",
                                "properties":{
                                    "avoidFirstHourSessions": {
                                        "description": "Penalize the position of the session if more than 50% of the classes are at first hour.",
                                        "type": "boolean",
                                        "default": true
                                    },
                                    "avoidLastHourSessions": {
                                        "description": "Penalize the position of the session if more than 50% of the classes are at last hour.",
                                        "type": "boolean",
                                        "default": true
                                    },
                                    "avoidAssingLastHourAndFirstNextDay": {
                                        "description": "Penalize that the last hour ande the first one of the following day coincide.",
                                        "type": "boolean",
                                        "default": true
                                    },
                                    "sameHourPreference": {
                                        "description": "Preference about the session classes coincide in the same time slot.",
                                        "enum": [
                                            "avoid",
                                            "attempt",
                                            "ignore"
                                        ],
                                        "default": "ignore"
                                    },
                                    "avoidAfternoonSessions": {
                                        "description": "Penalize if there are more than one session class after the midday.",
                                        "type": "boolean",
                                        "default": true
                                    },
                                    "avoidSectionsAfterBreak": {
                                        "description": "Penalize if more than 50% of the classes are after the last break of the day.",
                                        "type": "boolean",
                                        "default": true
                                    },
                                    "nonBreakInTheMiddleOfSession": {
                                        "description": "Do not allow breaks between classes of multiple duration (classes duration of more than one section).",
                                        "type": "boolean",
                                        "default": false
                                    },
                                    "breakDivideConsecutiveSessions": {
                                        "description": "Breaks divide sessions conditioned as consecutive.",
                                        "type": "boolean",
                                        "default": false
                                    },
                                    "followedDaysPreference": {
                                        "description": "If the session has more than one class, it indicates the preference about assign them in consecutive days.",
                                        "enum": [
                                            "ignore",
                                            "attempt",
                                            "avoid"
                                        ],
                                        "default": "ignore"
                                    },
                                    "consecutiveWeeksBorders": {
                                        "description": "Consider the end week day, and start week day, as consecutive days for 'followedDaysPreference'.",
                                        "type": "boolean",
                                        "default": false
                                    },
                                    "samePositionEveryPeriod": {
                                        "description": "Keep the same position each week or period for the classes of the session.",
                                        "enum": [
                                            "ignore",
                                            "attempt",
                                            "avoid",
                                            "strict",
                                            "forbidden"
                                        ],
                                        "default": "ignore"
                                    }
                                }
                            },
                            "sessionRelations": {
                                "title": "SessionRelations",
                                "description": "",
                                "type": "object",
                                "properties":{
                                    "simultaneusGroup": {
                                        "title": "SimultaneusGroup",
                                        "description": "Identifier of the simultaneous sessions group of the session. Indicates that the sessions must be taught at same time as the sessions of the group.",
                                        "type": "integer"
                                    },
                                    "differentDays": {
                                        "title": "DifferentDays",
                                        "description": "",
                                        "type": "object",
                                        "required":[
                                            "refSesions",
                                            "daysSetting"
                                        ],
                                        "properties":{
                                            "refSesions": {
                                                "title":"RefSesions",
                                                "description":"Identifiers of the sessions that they should not be assigned at the same day when this one.",
                                                "type":"array",
                                                "minItems": 1,
                                                "additionalItems": false,
                                                "items": {                                    
                                                    "title":"SessionRef",
                                                    "description":"Identifier of session.",
                                                    "type":"string"
                                                }    
                                            },
                                            "daysSetting": {
                                                "description": "Keep the same position each week or period for the classes of the session.",
                                                "enum": [
                                                    "nonConsecutiveDaysPreferred",
                                                    "consecutiveDaysPreferred",
                                                    "strictNonConsecutiveDaysPreferred",
                                                    "strictConsecutiveDaysPreferred"
                                                ]
                                            }

                                        }
                                    },
                                    "consecutiveGroup": {
                                        "title": "consecutiveGroup",
                                        "description": "Identifier of the consecutive sessions group of the session. Indicates that the sessions must be taught consecutive to the sessions of the group.",
                                        "type": "integer"
                                    },
                                    "nonConsecutiveSessions": {
                                        "title":"NonConsecutiveSessions",
                                        "description":"Identifiers of the sessions that they should not be consecutive. It is a strict condition.",
                                        "type":"array",
                                        "minItems": 1,
                                        "additionalItems": false,
                                        "items": {                                    
                                            "title":"SessionRef",
                                            "description":"Identifier of session.",
                                            "type":"string"
                                        }
                                    },
                                    "previousTo": {
                                        "title":"PreviousTo",
                                        "description":"Indicates that this session should be assigned in a previous day to the sessions of the list. It is a strict condition.",
                                        "type":"array",
                                        "minItems": 1,
                                        "additionalItems": false,
                                        "items": {                                    
                                            "title":"SessionRef",
                                            "description":"Identifier of session.",
                                            "type":"string"
                                        }
                                    },
                                    "afterTo": {
                                        "title":"AfterTo",
                                        "description":"Indicates that this session should be assigned in a later day to the sessions of the list. It is a strict condition.",
                                        "type":"array",
                                        "minItems": 1,
                                        "additionalItems": false,
                                        "items": {                                    
                                            "title":"SessionRef",
                                            "description":"Identifier of session.",
                                            "type":"string"
                                        }
                                    },
                                    "maximumSeparationTo": {
                                        "title":"MaximumSeparationTo",
                                        "description":"Contains sessions that must be taught a maximum number of days apart from the current session classes.",
                                        "type":"array",
                                        "minItems": 1,
                                        "additionalItems": false,
                                        "items": {
                                            "title":"MaximumSeparationToSession",
                                            "description":"Contains the identifier of the session that must be taught a number of days apart, and the maximum days.",                                        
                                            "type":"object",
                                            "required":[
                                                "refSessions",
                                                "days"
                                            ],
                                            "properties":{
                                                "refSessions": {
                                                    "title":"SessionRefs",
                                                    "description":".",
                                                    "type":"array",
                                                    "minItems": 1,
                                                    "additionalItems": false,
                                                    "items": {                                    
                                                        "title":"SessionRef",
                                                        "description":"Identifier of session.",
                                                        "type":"string"
                                                    }
                                                },
                                                "days": {
                                                    "description":"Condition's Days of separation.",
                                                    "type": "integer"
                                                }
                                            }
                                        }
                                    },
                                    "minimumSeparationTo": {
                                        "title":"MinimumSeparationTo",
                                        "description":"Contains sessions that must be taught a minimun number of days apart from the current session classes.",
                                        "type":"array",
                                        "minItems": 1,
                                        "additionalItems": false,
                                        "items": {
                                            "title":"MinimumSeparationToSession",
                                            "description":"Contains the identifier of the session that must be taught a number of days apart, and the minimun days.",                                        
                                            "type":"object",
                                            "required":[
                                                "refSessions",
                                                "days"
                                            ],
                                            "properties":{
                                                "refSessions": {
                                                    "title":"SessionRefs",
                                                    "description":".",
                                                    "type":"array",
                                                    "minItems": 1,
                                                    "additionalItems": false,
                                                    "items": {                                    
                                                        "title":"SessionRef",
                                                        "description":"Identifier of session.",
                                                        "type":"string"
                                                    }
                                                },
                                                "days": {
                                                    "description":"Condition's Days of separation. If value is 0 or 1 is equivalent to 'DifferentDays' condition.",
                                                    "type": "integer"
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }        
    },
    "definitions": {
        "frameTemplate": {
            "title": "FrameTemplate",
            "description": "Templates with assignment preferences to section of the frames.",
            "type": "array",
            "additionalItems": false,
            "items": {                                    
                "title": "SectionPreference",
                "type": "object",
                "required": [
                    "day",
                    "index",
                    "frame",
                    "type"
                ],                                    
                "properties": {
                    "day": {
                        "description": "Day of the week when is located the section.",
                        "type": "integer"
                    },
                    "index": {
                        "description": "Index inside the day where is located the section.",
                        "type": "integer"
                    },
                    "frame": {
                        "description": "Identifier name of the frame.",
                        "type": "string"
                    },
                    "type": { 
                        "description": "Element availability to be assigned to the section.",
                        "enum": ["banned", "available", "strong-non-preferred", "weak-non-preferred"] 
                    }
                }
            }
        },
        "weeklyStable": {
            "title": "WeeklyStable",
            "description": "Contains a single possible weekly distribution.",
            "$comment": "",
            "type": "array",
            "additionalItems": false,
            "items": {
                "title": "DailySections",
                "description": "Indicates the number of sections wich sould have the session in the day.",
                "type": "integer"   
            }
        },   
        "weeklyVariable": {
            "title":"WeeklyVariable",
            "description": "Define the distribution as a number of sections per week and a maximum range of sections per day.",
            "$comment": "",
            "type":"object",
            "required":[
                "numSessions",
                "maxSessionsDaily"
            ],
            "properties":{
                "numSessions": {
                    "description": ".",
                    "type": "number"
                },
                "maxSessionsDaily": {
                    "description": ".",
                    "type": "number"
                },
                "minSessionsDayly": {
                    "description": ".",
                    "enum": [
                        "allow",
                        "avoid",
                        "forbidden"
                    ],
                    "default": "allow"
                },
                "avoidMaxDuration": {
                    "description": ".",
                    "type":"boolean",
                    "default": false
                },
                "allowDiscontinuity": {
                    "description": ".",
                    "type":"boolean",
                    "default": false
                }
            }
        }
    }
}